<!DOCTYPE html>
<html lang="de">
<head>
  <!-- verhindert Browser-Zoom; wir zoomen selbst im Canvas -->
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

  <style>
    /* Seite */
    :root {
      --ui-gap: 12px;
      --ui-pad: 12px;
      --panel-bg: rgba(10, 20, 30, 0.78);
      --panel-border: rgba(255,255,255,0.08);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 14px;
      --text: #dbe7ef;
      --muted: #a7b3be;
    }

    html, body {
      margin: 0;
      height: 100%;
      background: #0f1b25;
      color: var(--text);
      overflow: hidden;             /* kein Scrollen der Seite */
      -webkit-tap-highlight-color: transparent;
    }

    /* Canvas-Bühne */
    #stage {
      position: absolute;
      inset: 0;
      touch-action: none;           /* damit wir Gesten abfangen können */
    }

    /* ===============================
       ❶ UI-Panel: fix unten links
       – wrapped, 2+ Zeilen möglich
       – Safe-Area respektieren
       ===============================*/
    #ui {
      position: fixed;
      left: max(12px, env(safe-area-inset-left));
      bottom: max(12px, env(safe-area-inset-bottom));
      z-index: 50;
      display: flex;
      flex-wrap: wrap;              /* automatisch umbrechen */
      gap: var(--ui-gap);
      align-items: center;
      max-width: calc(
        100vw - env(safe-area-inset-left) - env(safe-area-inset-right) - 24px
      );
      padding: var(--ui-pad) calc(var(--ui-pad) + 2px);
      background: var(--panel-bg);
      border: 1px solid var(--panel-border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);   /* glasig */
    }

    /* kleine Gruppen im Panel (Start, Reload, Select, Checkbox, …) */
    .group {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      flex: 0 1 auto;               /* erlaubt Umbruch */
      min-width: 0;                 /* sauberes Shrinking */
    }

    /* Buttons/Inputs – optisch neutral (du hast ggf. eigene Klassen) */
    .btn {
      padding: 9px 14px;
      border-radius: 10px;
      background: #1c2a36;
      color: var(--text);
      border: 1px solid var(--panel-border);
      cursor: pointer;
      user-select: none;
    }
    .btn.primary { background: #1e7f42; }
    .btn:active { transform: translateY(1px); }

    select, .checkbox {
      font: inherit;
      color: var(--text);
      background: #13212c;
      border: 1px solid var(--panel-border);
      border-radius: 10px;
      padding: 7px 12px;
    }

    label { color: var(--muted); }

    /* ===============================
       ❷ Debug-Overlay: fix oben links
       (zoomt NICHT mit)
       ===============================*/
    #debug-overlay {
      position: fixed;
      left: max(12px, env(safe-area-inset-left));
      top: max(12px, env(safe-area-inset-top));
      z-index: 60;
      white-space: pre;
      font: 14px/1.25 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      color: #e8f0f7;
      background: rgba(15, 30, 45, 0.8);
      border: 1px solid var(--panel-border);
      padding: 10px 12px;
      border-radius: 10px;
      box-shadow: var(--shadow);
      pointer-events: none;  /* klickt "durch" */
    }
  </style>
</head>
<body>
  <canvas id="game"></canvas>

  <div id="debug-overlay"></div>

  <div id="ui">
    <button id="btnStart">Start</button>
    <button id="btnReload">Neu laden</button>
    <br><br>
    Karte:
    <select id="mapSelect">
      <option value="map-pro.json">map-pro.json</option>
      <option value="map-demo.json">map-demo.json</option>
      <option value="map-checker-16x16.json">map-checker (16×16)</option>
    </select>
    <label><input type="checkbox" id="autoStart"> Auto-Start</label>
  </div>

  <script type="module" src="./boot.js"></script>
</body>
</html>
