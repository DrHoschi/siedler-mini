<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Siedler‑Mini</title>

  <!-- PWA/Styles -->
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="style.css">

  <!-- Lokale UI-Styles (Startpanel, Canvas-Layer) -->
  <style>
    :root{--bg:#0b1726;--panel:#0f1d31}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:#cfe3ff;font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto}

    /* Zeichenfläche: eigener Layer, damit UI nicht mitzoomt */
    #stageWrap{position:fixed;inset:0;overflow:hidden;z-index:0}
    #stage{position:absolute;left:0;top:0}

    /* Start-Panel zentriert */
    #startPanel{position:fixed;inset:0;display:grid;place-items:center;z-index:90000}
    #startPanel .card{
      background:var(--panel); border:1px solid #1e2d42; border-radius:16px; padding:18px;
      min-width:300px; max-width:min(92vw,600px); box-shadow:0 20px 60px rgba(0,0,0,.45)
    }
    #startPanel h1{margin:0 0 10px 0;font-size:40px;letter-spacing:.5px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0}
    select,button,input[type=checkbox]{font:inherit}
    button{background:#0f1b29;border:1px solid #1b2a40;color:#cfe3ff;border-radius:10px;padding:10px 14px;cursor:pointer}
    button:disabled{opacity:.55;cursor:not-allowed}
    .muted{opacity:.8}
    #quickDiag{white-space:pre; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
  </style>
</head>
<body>

  <!-- Zeichenfläche -->
  <div id="stageWrap">
    <canvas id="stage" width="1024" height="768"></canvas>
  </div>

  <!-- Start-/Control-UI -->
  <div id="startPanel">
    <div class="card">
      <h1>Siedler‑Mini</h1>

      <div class="row">
        <label for="mapSelect">Karte:&nbsp;</label>
        <select id="mapSelect">
          <option value="assets/maps/map-demo.json">map-demo.json</option>
          <option value="assets/maps/map-pro.json">map-pro.json</option>
          <option value="assets/maps/map-test-all.json">map-test-all.json</option>
        </select>
      </div>

      <div class="row">
        <label class="muted"><input id="autoStart" type="checkbox"> Auto‑Start (nur einmal)</label>
      </div>

      <div class="row">
        <button id="btnStart">Start</button>
        <button id="btnReload">Neu laden</button>
        <button id="btnFull">Vollbild</button>
        <button id="btnDebug">Debug</button>
        <button id="btnSaveDbg">Debug speichern</button>
      </div>

      <div class="row muted" id="quickDiag"></div>
    </div>
  </div>

  <!-- Debug & Inspector zuerst, damit console-Hooks aktiv sind -->
  <script src="debug.js"></script>
  <script src="tools/dev-inspector.js"></script
