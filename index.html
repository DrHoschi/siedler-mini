<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Siedler‑Mini • Debug</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#0c1722; --panel:#101b26; --panel2:#0e1924;
      --text:#d7e6f2; --muted:#97a7b5; --accent:#45d07e;
      --btn:#1a3a2a; --btn2:#1e2e46; --warn:#e9b64b;
    }
    html, body {
      margin:0; padding:0; height:100%;
      background:var(--bg); color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overscroll-behavior: none;  /* Buttons sollen Events bekommen */
    }
    #stage{ position:relative; width:100vw; height:100vh; overflow:hidden; }
    canvas#game{
      position:absolute; inset:0;
      width:100%; height:100%;
      image-rendering: pixelated;
      touch-action: none;          /* Pan/Pinch macht die Engine */
      background: transparent;
    }

    /* Status-HUD links oben (FPS, Cam, Map …) */
    #hud{
      position:absolute; left:12px; top:12px; z-index:40;
      background: rgba(0,0,0,.55);
      border:1px solid rgba(0,0,0,.6);
      border-radius:10px; padding:.55rem .7rem;
      font: 13px/1.35 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      white-space:pre; color:#b7d7ff;
      pointer-events:none;
    }

    /* Debug-Log rechts oben */
    #debug{
      position:absolute; right:12px; top:12px; z-index:50;
      min-width:320px; max-width:44vw; max-height:50vh; overflow:auto;
      background: rgba(0,0,0,.55); color:#b7ffb7;
      border:1px solid rgba(0,0,0,.6); border-radius:10px;
      padding:.6rem .7rem; font:13px/1.35 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      white-space:pre-wrap;
    }
    #debug strong{ color:#fff; }
    #debug .err{ color:#ffb1b1; }

    /* Control-Panel unten mittig (Start, Reload, Mapwahl) */
    #panel{
      position:absolute; left:50%; bottom:24px; transform:translateX(-50%);
      z-index:45; display:flex; gap:.8rem; align-items:center;
      padding:1rem 1.1rem; background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid rgba(0,0,0,.5); border-radius:16px;
      box-shadow: 0 8px 28px rgba(0,0,0,.35);
    }
    .btn{
      appearance:none; border:0; border-radius:14px; padding:.7rem 1.1rem;
      font-weight:700; cursor:pointer; color:#dff5e8;
      background:var(--btn);
    }
    .btn.secondary{ background:var(--btn2); color:#d8e3f0; }
    .label{ color:var(--muted); font-weight:600; margin-left:.25rem; }
    select{
      background:#0f1b27; color:#eaf4ff; border:1px solid #0a1118;
      padding:.6rem .7rem; border-radius:.6rem; min-width: 240px;
    }

    /* Debug-Toggle unten rechts (muss klickbar sein) */
    #debugToggle{ position: fixed; right:12px; bottom:12px; z-index:60; }
  </style>
</head>
<body>
  <div id="stage">
    <canvas id="game"></canvas>

    <!-- Status oben links -->
    <div id="hud">Frames: 0   dt=0ms
Cam: x=0.0  y=0.0  zoom=1.00
Map: –      /   Assets: –
DPR=–       Size=–x–</div>

    <!-- Debug rechts oben -->
    <div id="debug">[boot] Debug‑Overlay aktiv (non‑blocking). F2 toggelt Overlay.</div>

    <!-- Control-Panel -->
    <div id="panel">
      <button id="btnStart" class="btn">Start</button>
      <button id="btnReload" class="btn secondary">Neu laden</button>
      <span class="label">Karte:</span>
      <select id="selMap">
        <!-- per JS befüllt -->
      </select>
    </div>

    <button id="debugToggle" class="btn secondary">Debug</button>
  </div>

  <!-- Reihenfolge beibehalten -->
  <script defer src="tools/map-runtime.js"></script>
  <script defer src="boot.js"></script>
</body>
</html>
