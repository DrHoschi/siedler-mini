<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover,user-scalable=no" />
  <title>Siedler Mini V12.2 ‚Äì Iso + Mini‚ÄëMap + Tr√§ger</title>

  <meta name="theme-color" content="#0e0f14" />
  <style>
    :root{
      --bg:#0e0f14; --panel:#141820; --line:#242a36; --txt:#e9edf5; --mut:#aab0bd; --accent:#6ee7a9;
    }
    html,body{margin:0;height:100%;background:var(--bg);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;overflow:hidden}

    /* Kopfzeile */
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:10px 12px; padding-top:max(10px, env(safe-area-inset-top));
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg,#11151c,#0e1118);
      position:relative; z-index:30;
    }
    .stats{display:flex; gap:12px; flex-wrap:wrap; font-variant-numeric:tabular-nums; font-size:14px}
    .pill{padding:6px 10px; border:1px solid var(--line); border-radius:10px; background:#161b24}
    .pill b{margin-left:6px}

    /* Linkes Werkzeug-Panel */
    #toolbar{
      position:fixed; left:10px; top:68px;
      display:flex; flex-direction:column; gap:8px;
      padding:8px; border:1px solid var(--line); border-radius:12px;
      background:#141820cc; backdrop-filter:blur(6px);
      z-index:25;
    }
    .btn{
      appearance:none; border:1px solid var(--line); background:#161b24; color:var(--txt);
      padding:9px 11px; border-radius:10px; cursor:pointer; font-weight:600; white-space:nowrap;
    }
    .btn.active{ outline:2px solid var(--accent); outline-offset:0 }

    /* Spielfeld & Minimap */
    #wrap{ position:fixed; inset:0; display:block }
    #canvas{
      position:absolute; inset:0; display:block; touch-action:none; background:#0b0e13;
    }
    #minimap{
      position:absolute; right:10px; bottom:10px; width:200px; height:148px;
      border:1px solid var(--line); border-radius:8px; background:#0c1118; z-index:20;
    }

    /* Overlay (Start) */
    #overlay{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:40;
      background:transparent; pointer-events:none;
    }
    .card{
      pointer-events:auto; width:min(92vw,740px);
      background:rgba(20,26,34,.9); border:1px solid var(--line); border-radius:16px; padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.45);
    }
    .card h1{ margin:0 0 8px; font-size:22px }
    .card p{ margin:8px 0 0; color:var(--mut); line-height:1.35 }
    .row{ display:flex; gap:8px; flex-wrap:wrap; margin-top:12px }
    .tip{ font-size:12px; color:var(--mut); margin-top:8px }

    /* Badges unten rechts (Version/Diag) */
    #badge, #diag{
      position:fixed; right:10px; z-index:35; padding:4px 8px; border-radius:6px; font-size:12px;
      background:rgba(0,0,0,.45); color:#6ee7a9;
    }
    #badge{ bottom:10px }
    #diag{ bottom:34px; color:#ffe8e8 }

    /* Mobile Helfer */
    @media (max-width: 640px){
      #toolbar{ top:66px; left:8px; gap:6px; }
      .btn{ padding:8px 10px; }
      #minimap{ width:168px; height:126px; }
    }
  </style>
</head>
<body>

  <header>
    <div class="stats">
      <span class="pill">üå≤ Holz <b id="wood">0</b></span>
      <span class="pill">‚õ∞Ô∏è Stein <b id="stone">0</b></span>
      <span class="pill">üåæ Nahrung <b id="food">0</b></span>
      <span class="pill">ü™ô Gold <b id="gold">0</b></span>
      <span class="pill">üë• Bev. <b id="pop">0</b></span>
      <span class="pill">Ansicht: <b>Isometrisch</b></span>
    </div>
    <div class="stats">
      <span class="pill">V12.2</span>
    </div>
  </header>

  <!-- Linkes Werkzeug-Panel -->
  <div id="toolbar" aria-label="Werkzeuge">
    <button class="btn active" data-tool="select" title="Zeiger (nichts bauen)">Zeiger</button>
    <button class="btn" data-tool="road" title="Stra√üe bauen">Stra√üe</button>
    <button class="btn" data-tool="lumber" title="Holzf√§ller-H√ºtte setzen">Holzf√§ller</button>
    <button class="btn" data-tool="bulldoze" title="Abriss (Entfernen)">Abriss</button>
  </div>

  <!-- Spielfeld + Minimap -->
  <div id="wrap">
    <canvas id="canvas"></canvas>
    <canvas id="minimap" width="200" height="148"></canvas>
  </div>

  <!-- Start/Reset Overlay -->
  <div id="overlay">
    <div class="card">
      <h1>Siedler‚ÄëMini V12.2</h1>
      <p>Isometrische Ansicht mit Mini‚ÄëMap. Baue <b>Stra√üen</b>, platziere eine <b>Holzf√§llerh√ºtte</b> neben Wald
         und verbinde sie mit dem <b>HQ</b> ‚Äì <i>Tr√§ger</i> holen Holz automatisch.</p>
      <p class="tip">Steuerung: Linksklick = bauen (nur im Bau‚ÄëTool) ‚Ä¢ Rechtsklick/2‚ÄëFinger ziehen = Karte bewegen
        ‚Ä¢ Mausrad/Pinch = Zoom zum Cursor ‚Ä¢ ESC = zur√ºck zum Zeiger</p>
      <div class="row">
        <button class="btn" data-action="start">Start</button>
        <button class="btn" data-action="reset">Neues Spiel</button>
      </div>
    </div>
  </div>

  <!-- Badges -->
  <div id="badge" aria-live="polite">JS V12.2</div>
  <div id="diag" style="display:none"></div>

  <!-- Spiel-Logik -->
  <script src="main.js?v=12.2.0" defer></script>

</body>
</html>
