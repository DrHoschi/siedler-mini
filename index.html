<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
  <meta name="theme-color" content="#0b1520" />
  <title>Siedler‑Mini V14 (Mobile)</title>

  <style>
    :root {
      --bg: #0f1822;
      --panel: #1c2733;
      --panel2: #121a24;
      --txt: #d7e1ea;
      --muted: #9fb2c4;
      --accent: #66e28f;
      --danger: #ff6b6b;
      --radius: 14px;
    }

    html,body{height:100%;margin:0;padding:0;background:#0b1520;color:var(--txt);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Helvetica,Arial,sans-serif}
    #wrap{position:fixed;inset:0;display:grid;grid-template-rows:auto 1fr}
    /* Obere Leiste (Debug/Zoom etc.) – optional, kann leer sein */
    #hudTop{display:flex;gap:.5rem;padding:.5rem .75rem;align-items:center;pointer-events:none}
    .pill{pointer-events:auto;background:var(--panel2);border:1px solid #223241;color:var(--txt);padding:.25rem .6rem;border-radius:999px;font-size:.85rem;opacity:.9}
    .pill.green{background:#12311f;border-color:#1e5a36;color:#9af3b9}
    .pill.red{background:#3a1a1a;border-color:#6b2828;color:#ffb3b3}

    /* Linke Werkzeugleiste */
    #tools{position:fixed;left:.5rem;top:3.25rem;display:flex;flex-direction:column;gap:.5rem;z-index:10}
    .btn{background:var(--panel2);border:1px solid #223241;border-radius:12px;padding:.45rem .7rem;color:var(--txt);min-width:88px;text-align:center;font-size:.9rem}
    .btn.active{outline:2px solid #5ad18e}

    /* Das Spiel-Canvas */
    #stage{position:relative;inset:0}
    #game{
      position:absolute;left:0;top:0;width:100%;height:100%;
      touch-action:none; /* Pan/Pinch übernehmen wir selbst */
      display:block;background:transparent;
    }

    /* Start-Overlay */
    #start{
      position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);
      z-index:20;
    }
    #card{
      width:min(680px,90vw);background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid #223241;border-radius:var(--radius);
      padding:1rem 1.25rem;box-shadow:0 20px 60px rgba(0,0,0,.35)
    }
    #card h1{font-size:1.2rem;margin:.15rem 0 0 0}
    #card p{color:var(--muted);margin:.25rem 0}
    #card .actions{margin-top:.6rem;display:flex;gap:.5rem}
    .b{border-radius:999px;border:1px solid #243142;padding:.45rem .85rem;background:#0f1924;color:var(--txt)}
    .b.start{background:#153023;border-color:#285a41;color:#a2f3bf}
    .b.full{background:#0f1f2f;border-color:#284a6b}
    .b.reset{background:#2c1515;border-color:#6b2828;color:#ffc5c5}
    .hint{margin-top:.4rem;color:#7fa3c4;font-size:.9rem}
    #ver{position:fixed;right:.5rem;bottom:.35rem;color:#7c95aa;font-size:.75rem;opacity:.7;z-index:5}
  </style>
</head>
<body>
  <div id="wrap">
    <div id="hudTop">
      <!-- ein paar klickbare Pills, optional; Start blendet HUD aus -->
      <div id="hudDebug" class="pill">Debug</div>
      <div id="hudZoom" class="pill">Zoom 1.00×</div>
      <div id="hudCenter" class="pill">Zentrieren</div>
      <div id="hudFull" class="pill">Vollbild</div>
    </div>

    <div id="stage">
      <!-- WICHTIG: dieses Canvas MUSS existieren -->
      <canvas id="game"></canvas>
    </div>
  </div>

  <!-- Werkzeuge links -->
  <div id="tools" aria-label="Werkzeuge">
    <button class="btn active" data-tool="pointer">Zeiger</button>
    <button class="btn" data-tool="road">Straße</button>
    <button class="btn" data-tool="hq">HQ</button>
    <button class="btn" data-tool="lumber">Holzfäller</button>
    <button class="btn" data-tool="depot">Depot</button>
    <button class="btn" data-tool="bulldoze">Abriss</button>
  </div>

  <!-- Start-Overlay -->
  <div id="start">
    <div id="card">
      <h1>Siedler‑Mini V14 (Mobile)</h1>
      <p>1 Finger = Karte verschieben (nur im <em>Zeiger‑Tool</em>) · 2 Finger = Zoomen · kurzer Tap = bauen (wenn ein Bau‑Tool aktiv ist).</p>
      <p>Das erste HQ (Stein) ist mittig gesetzt. Fehlende Texturen lädt das Spiel als Platzhalter.</p>
      <div class="actions">
        <button id="btnStart" class="b start">Start</button>
        <button id="btnFull"  class="b full">Vollbild</button>
        <button id="btnReset" class="b reset">Reset</button>
      </div>
      <div class="hint">Tipp: Doppeltipp auf diese Karte schaltet Vollbild.</div>
    </div>
  </div>

  <div id="ver">JS V14.1</div>

  <!-- Boot-Strapper (kümmert sich um DOM ready, SW, Vollbild & Start) -->
  <!-- Stelle sicher, dass index.html diese Datei am Ende des <body> lädt: -->
<script src="boot.js?v=14.2" defer></script>
</body>
</html>
