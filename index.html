<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1620" />
  <title>Siedler-Mini V14.6 (Mobile)</title>
  <style>
    :root{
      color-scheme: dark;
      --safe-top: env(safe-area-inset-top);
      --safe-right: env(safe-area-inset-right);
      --safe-bottom: env(safe-area-inset-bottom);
      --safe-left: env(safe-area-inset-left);
      --pad: 8px;
    }

    html,body{ margin:0; padding:0; background:#0f1823; height:100%; overscroll-behavior:none; }
    /* Spielfeld */
    #game{
      position:fixed; inset:0; width:100vw; height:100dvh; display:block; background:#0f1823;
      touch-action:none;  /* wichtig: Gesten ans Spiel, nicht an den Browser */
    }

    /* HUD oben â€“ kompakt & scrollbar */
    .hud-row{
      position:fixed;
      top:calc(var(--pad) + var(--safe-top));
      left:calc(var(--pad) + var(--safe-left));
      right:calc(var(--pad) + var(--safe-right));
      display:flex; gap:8px; align-items:center;
      overflow-x:auto; overscroll-behavior:contain;
      padding:6px 2px; -webkit-overflow-scrolling: touch;
      z-index:10;
    }

    /* Tools links */
    .tools{
      position:fixed;
      top:calc(56px + var(--safe-top)); /* unter der HUD-Zeile */
      left:calc(var(--pad) + var(--safe-left));
      display:flex; flex-direction:column; gap:10px;
      z-index:10;
    }

    /* Utility rechts oben */
    .utils{
      position:fixed;
      top:calc(var(--pad) + var(--safe-top));
      right:calc(var(--pad) + var(--safe-right));
      display:flex; gap:8px; z-index:10;
    }

    /* Buttons */
    .pill,.btn{
      background:#0f1b29; border:1px solid #1e2d42; border-radius:18px;
      color:#cfe3ff; font:14px/18px system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding:8px 12px; white-space:nowrap;
    }
    .btn.active{ outline:2px solid #3675ff; }
    .btn.green{ background:#0f2b1b; border-color:#214c39; }
    .btn.blue{ background:#0f1f2b; border-color:#1e3a56; }
    .btn.red{ background:#2b1111; border-color:#5c2525; }

    /* Start-Overlay */
    #startOverlay{
      position:fixed; left:0; right:0;
      bottom:calc(18px + var(--safe-bottom)); margin:0 auto; width:min(92vw, 680px);
      background:rgba(15,27,41,.9); border:1px solid #1e2d42; border-radius:18px;
      color:#cfe3ff; padding:14px 16px; z-index:20;
      box-shadow:0 12px 40px rgba(0,0,0,.45);
    }
    #startOverlay h3{ margin:0 0 10px; font-weight:700; }
    #startOverlay p{ margin:6px 0; opacity:.9; }
    #startOverlay .row{ display:flex; gap:10px; margin-top:10px; }

    /* Versions-Badge */
    .vbadge{
      position:fixed; right:calc(var(--pad) + var(--safe-right));
      bottom:calc(var(--pad) + var(--safe-bottom));
      font:12px/1 system-ui, -apple-system, Segoe UI, Roboto;
      color:#6f88a8; opacity:.6; user-select:none; pointer-events:none; z-index:9;
    }

    /* Mobile Tuning */
    @media (max-width:700px){
      .pill,.btn{ font-size:13px; padding:6px 10px; border-radius:16px; }
      .tools{ gap:8px; }
      #startOverlay{ width:min(94vw, 560px); }
    }
  </style>
</head>
<body>

  <!-- HUD: Ressourcen -->
  <div class="hud-row" id="hud">
    <div class="pill" id="hud-wood">ðŸŒ² Holz <span>0</span></div>
    <div class="pill" id="hud-stone">ðŸª¨ Stein <span>0</span></div>
    <div class="pill" id="hud-food">ðŸŒ¿ Nahrung <span>0</span></div>
    <div class="pill" id="hud-gold">ðŸª™ Gold <span>0</span></div>
    <div class="pill" id="hud-carrier">ðŸ¥” TrÃ¤ger <span>0</span></div>
    <div class="pill" id="hud-tool">Tool: <span>Zeiger</span></div>
    <div class="pill" id="hud-zoom">Zoom <span>1.00x</span></div>
  </div>

  <!-- Tools: links -->
  <div class="tools">
    <button class="btn active" id="btnPointer">Zeiger</button>
    <button class="btn" id="btnRoad">StraÃŸe</button>
    <button class="btn" id="btnHQ">HQ</button>
    <button class="btn" id="btnLumber">HolzfÃ¤ller</button>
    <button class="btn" id="btnDepot">Depot</button>
    <button class="btn" id="btnErase">Abriss</button>
  </div>

  <!-- Utils: rechts oben -->
  <div class="utils">
    <button class="btn" id="centerBtn">Zentrieren</button>
    <button class="btn" id="debugBtn">Debug</button>
    <button class="btn" id="fsBtn">Vollbild</button>
  </div>

  <!-- Spielfeld -->
  <canvas id="game"></canvas>

  <!-- Start-Hinweis -->
  <div id="startOverlay">
    <h3>Siedler-Mini V14.6 (Mobile)</h3>
    <p><b>1 Finger</b> = Karte verschieben (nur im <i>Zeiger-Tool</i>) Â·
       <b>2 Finger/Scroll</b> = Zoomen Â· kurzer Tap = bauen (wenn ein Bau-Tool aktiv ist).
       Das erste HQ ist mittig gesetzt.</p>
    <p>Tipp: Doppeltipp auf die Karte schaltet Vollbild.</p>
    <div class="row">
      <button class="btn green" id="startBtn">Start</button>
      <button class="btn blue"  id="fsBtn2">Vollbild</button>
      <button class="btn red"   id="resetBtn">Reset</button>
    </div>
  </div>

  <div class="vbadge">JS V14.6</div>

  <script type="module" src="./boot.js"></script>
</body>
</html>
