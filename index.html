<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Siedler‑Mini</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <style>
    :root{ --bg:#0b0f14; --ui:#1b1f24; --ui2:#232a31; --ink:#e7eef6; --mut:#9fb0c0; --acc:#5aa9ff; }
    html,body{ height:100%; margin:0; background:var(--bg); color:var(--ink);
      font:14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    #app{ position:relative; width:100%; height:100%; overflow:hidden; }
    canvas{ display:block; width:100%; height:100%; }

    /* Start-Overlay: zuerst sichtbar */
    #start{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background:rgba(0,0,0,.86); z-index:1000; }
    #start .card{ width:560px; max-width:96vw; background:#0d1218; border:1px solid #000;
      border-radius:12px; padding:16px; box-shadow:0 6px 24px rgba(0,0,0,.5); }
    #start h2{ margin:0 0 8px 0; }
    .row{ display:flex; flex-wrap:wrap; align-items:center; gap:8px; }
    button{ padding:8px 12px; background:var(--ui2); color:var(--ink); border:1px solid #000;
      border-radius:8px; cursor:pointer; }
    button:hover{ outline:1px solid var(--acc); }
    input[type=file]{ color:var(--ink); }

    /* Mini-Statusleiste unten */
    #status{ position:fixed; left:0; right:0; bottom:0; height:28px; display:flex; gap:12px;
      align-items:center; padding:4px 10px; background:#0a0e13; color:#9aa3ad; border-top:1px solid #000; z-index:10; }

    /* Inspector/Debug (oben rechts) – bitte nicht entfernen */
    #inspector{ position:fixed; right:10px; top:10px; z-index:20; background:rgba(0,0,0,.55);
      color:#e7eef6; border:1px solid #000; border-radius:8px; padding:8px; white-space:pre;
      font:12px/1.35 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; pointer-events:none; }
  </style>
</head>
<body>
  <div id="app">
    <!-- Dein Canvas (Spiel) -->
    <canvas id="game"></canvas>

    <!-- Start-Overlay -->
    <div id="start">
      <div class="card">
        <h2>Siedler‑Mini</h2>
        <p>Wähle, wie du starten möchtest:</p>
        <div class="row" style="margin:6px 0 12px;">
          <button id="btnStartGame">Spiel starten</button>
          <button id="btnLoadMap">Map laden…</button>
          <!-- NEU: Level-Editor Button (separater Tab) -->
          <button id="btnLevelEditor">Level‑Editor starten</button>
        </div>

        <div class="row" style="margin-top:6px;">
          <input id="fileMap" type="file" accept=".json,application/json" />
          <button id="btnReload">Neu laden</button>
          <button id="btnSaveDebug">Debug speichern</button>
          <label style="margin-left:auto; display:flex; align-items:center; gap:6px;">
            <input id="chkAutostart" type="checkbox" />
            AutoStart
          </label>
        </div>

        <p style="color:var(--mut); margin:10px 0 0 0;">
          Debug/Inspector ist aktiv (oben rechts). Das Startfenster erscheint immer zuerst.
        </p>
      </div>
    </div>

    <!-- Inspector-Overlay -->
    <pre id="inspector">[Inspector bereit]</pre>

    <!-- Statusleiste -->
    <div id="status">
      <span id="stA">Demo-Map</span>
      <span id="stB">Pro-Map</span>
      <span id="stC">Test-All</span>
      <span id="stD">Start</span>
      <span id="stE">Neuladen</span>
      <span id="stF">Debug speichern</span>
      <span id="stG">AutoStart</span>
    </div>
  </div>

  <!-- Haupt-Einstieg: dein bestehendes Boot-Skript -->
  <script type="module" src="./boot.js"></script>

  <!-- Kleiner Zusatz-Handler NUR für den Level-Editor-Button.
       Kollisionsfrei zu deiner bestehenden boot.js-Logik. -->
  <script>
    (function(){
      const btn = document.getElementById('btnLevelEditor');
      if(btn){
        btn.addEventListener('click', () => {
          // Öffnet den Editor in einem neuen Tab – keine Änderung an game/boot nötig
          window.open('./tools/level-editor/index.html', '_blank', 'noopener');
        });
      }
    })();
  </script>
</body>
</html>
